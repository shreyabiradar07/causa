# Quarkus configuration
quarkus.http.port=8080

# Ollama configuration
quarkus.langchain4j.ollama.base-url=http://ollama.default.svc.cluster.local:11434

# Detector model configuration
quarkus.langchain4j.ollama.detector.chat-model.model-id=phi3:mini
quarkus.langchain4j.ollama.detector.base-url=${quarkus.langchain4j.ollama.base-url}

# RCA model configuration
quarkus.langchain4j.ollama.rca.chat-model.model-id=phi3:mini
quarkus.langchain4j.ollama.rca.base-url=${quarkus.langchain4j.ollama.base-url}
quarkus.langchain4j.ollama.rca.timeout=300s

# Validator model configuration
quarkus.langchain4j.ollama.validator.chat-model.model-id=phi3:mini
quarkus.langchain4j.ollama.validator.base-url=${quarkus.langchain4j.ollama.base-url}
quarkus.langchain4j.ollama.validator.timeout=300s

# Embedding model
quarkus.langchain4j.ollama.embedding-model.model-id=phi3:mini

# Ollama timeouts
quarkus.langchain4j.ollama.timeout=300s
quarkus.langchain4j.ollama.detector.timeout=300s

# Prometheus configuration (OpenShift Internal)
prometheus.url=https://prometheus-k8s.openshift-monitoring.svc.cluster.local:9091
# Cryostat configuration (OpenShift Internal in openshift-operators namespace)
cryostat.url=https://cryostat.openshift-operators.svc.cluster.local:4180

# Rest client configuration
quarkus.rest-client.prometheus-api.url=${prometheus.url}
# Global TLS trust covers these if specific ones fail
# quarkus.rest-client.prometheus-api.trust-all removed to avoid warnings

quarkus.rest-client.cryostat-api.url=${cryostat.url}
# quarkus.rest-client.cryostat-api.trust-all removed to avoid warnings

quarkus.tls.trust-all=true

cryostat.enabled=false

# RAG configuration
rag.enabled=true
rag.knowledge-base.path=knowledge_base/

# RCA Scan configuration
rca.scan.interval=5m
rca.label=kruize/rca=enabled

# Prompts configuration
prompt_anomaly_detection=You are a specialized anomaly detection model. Analyze the METRICS data. Output ONLY the anomaly type or 'HEALTHY'. Example: 'JVM_OOM_LEAK'.\n\nMETRICS:\n{metricsData}
prompt_rca=You are the Root Cause Analyst. Use all provided context to provide a detailed, reasoned RCA and proposed fix. Focus heavily on the JFR data.\n\nANOMALY TYPE: {anomalyType}\nFULL CONTEXT: {fullContext}\n\nYour task: Determine the root cause and propose a solution. Output only the detailed analysis and fix.
prompt_validation=You are the Validation Agent. Your task is to critique the RCA output and then format the original data and the RCA output into the final RCAReport JSON schema.\n\nCRITIQUE: Start with a brief critique of the proposed fix.\n\nRCA Output to Validate: {rcaOutput}\n\nOriginal Context:\nFULL CONTEXT: {fullContext}
